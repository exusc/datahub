{% extends 'base2.html' %}

{% block body %}

<header class="w3-container" style="padding-top:22px">
    <h2>Overview for {{request.user.first_name}} {{request.user.last_name}} ({{request.user.username}})</b></h2>
</header>

<div class="w3-row-padding w3-margin-bottom">
    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Roles:</h4>
            {% if user.is_superuser %}
            <li>Superuser (Maintenance of all Hub-Elements)</li>
            {% else %}
                {% if user.is_staff %}
                <li>Staff (Maintenance of {{request.user.owner}} Hub-Elements)</li>
                {% endif %}
            {% endif %}
            {% for group in user.groups.all %}
            <li>{{group}}</li>
            {% endfor %}
        </div>
    </div>

    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Scopes:</h4>
            {% for scope in all_scopes.all %}
            <li>{{scope}} - {{scope.desc}}</li>
            {% endfor %}
        </div>
    </div>

    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Last 5 Activities:</h4>
            {% for logentry in LogEntrys %}
            <li>{{logentry}}</li>
            {% endfor %}
        </div>
    </div>
</div>


{% if user.is_staff %}
<header class="w3-container" style="padding-top:22px">
    <h2>Overview for {{request.user.owner}} - {{request.user.owner.desc}}  Number of User: 22</b></h2>
</header>

{% for application in applications %}
<div class="w3-row-padding w3-margin-bottom">
    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Application: {{application}} - {{application.desc}}</h4>
            <br>Business-Units:
            {% if application.business_unit_1 %}
            <li>{{application.business_unit_1}}</li>
            {% endif %}
            {% if application.business_unit_2 %}
            <li>{{application.business_unit_2}}</li>
            {% endif %}
            {% if application.business_unit_3 %}
            <li>{{application.business_unit_3}}</li>
            {% endif %}
            {% if application.business_unit_4 %}
            <li>{{application.business_unit_3}}</li>
            {% endif %}
            {% if application.business_unit_5 %}
            <li>{{application.business_unit_5}}</li>
            {% endif %}
            <br>Scopes: 34
            </div>
    </div>
    {% for area in application.area_set.all %}
    <div class="w3-third">
        <div class="w3-container w3-theme-l4 w3-padding-16">
            <div class="w3-clear"></div>
            <h4>Area: {{area}} - {{area.desc}}</h4>
                Database: <b><a href="{% url 'admin:organization_container_change' area.database.id %}">{{area.database}}</a></b> ({{area.database.desc}});
                <br>Schema Views: <b>{{area.application.key.lower}}_{{area.key.lower}}</b>; 
                Schema Tables: <b>{{area.application.key.lower}}_{{area.key.lower}}_base</b>
                <br>Filestorage: <b><a href="{% url 'admin:organization_container_change' area.filestorage.id %}">{{area.filestorage}}</a></b> ({{area.filestorage.desc}});
            
            </div>
    </div>
    {% endfor area %}
</div>
{% endfor %}

{% endif %}


{% endblock %}