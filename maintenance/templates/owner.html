{% extends 'base.html' %}

{% block body %}
  
<div class="w3-panel w3-leftbar w3-light-blue w3-card-4 w3-padding">
<h2>Owner <a href="{% url 'admin:organization_owner_change' owner.id %}">{{owner}}</a> - {{owner.desc}}</h2>
</div>


<div class="w3-panel w3-leftbar w3-light-gray w3-card-4 w3-padding">
    <h3>Container</h3>
{% for container in containers %}
    <li><b><a href="{% url 'admin:organization_container_change' container.id %}">{{container}}</a></b> ({{container.containertype}})
    <a href="{% url 'container' container.key %}">Infos</a></li>
    {% endfor %}

</div>

{% for application in applications %}
<div class="w3-panel w3-leftbar w3-light-gray w3-card-4 w3-padding">

<<<<<<< HEAD
    <h3>Application <b><a href="{% url 'admin:organization_application_change' application.id %}">{{application}}</a></b> {{application.desc}} </h3>

    <h4>Business units</h4>    
    <li>{{application.business_unit_1}}</li> 
    {% if application.business_unit_2 %} <li>{{application.business_unit_2}}</li> {% endif %}
    {% if application.business_unit_3 %} <li>{{application.business_unit_3}}</li> {% endif %}
    {% if application.business_unit_4 %} <li>{{application.business_unit_4}}</li> {% endif %}
    {% if application.business_unit_5 %} <li>{{application.business_unit_5}}</li> {% endif %}
    
    <h4>Areas</h4>
    {% for area in application.area_set.all %}
    <li><b><a href="{% url 'admin:organization_area_change' area.id %}">{{area}}</a></b> ({{area.desc}})
        with Database: <b><a href="{% url 'admin:organization_container_change' area.database.id %}">{{area.database}}</a></b> ({{area.database.desc}});
        Schema for user access: <b>{{area.application.key.lower}}_{{area.key.lower}}</b>; 
        Schema for tables: <b>{{area.application.key.lower}}_{{area.key.lower}}_base</b>
        with Filestorage: <b><a href="{% url 'admin:organization_container_change' area.filestorage.id %}">{{area.filestorage}}</a></b> ({{area.filestorage.desc}});
    </li>  
    {% endfor area %}
    
    <h4>Scopes = MinIo Buckets or Folder in Filesystem and RLS in DBs:</h4>
        {% for scope in application.scope_set.all %}
=======
    <li>Scopes = MinIo Buckets or Folder in Filesystem and RLS in DBs: <a href="{% url 'addscopes' application.key %}"><b>Add Scopes</b></a></li>
    <ul>{% for scope in application.scope_set.all %}
>>>>>>> 2d4de7c2490063ffb66657d4c025e77107e0585d
        <li><b><a href="{% url 'admin:organization_scope_change' scope.id %}">{{scope}}</a> {{scope.desc}} </b>
            org: <b><a href="{% url 'admin:organization_scope_change' scope.org_scope_id %}">{{scope.org_scope}}</a></b> {{scope.org_scope.desc}}
            app: <b><a href="{% url 'admin:organization_scope_change' scope.app_scope_id %}">{{scope.app_scope}}</a></b> {{scope.app_scope.desc}}
        </li>
        {% endfor scope %}
    </div>
{% endfor application %}

<div class="w3-panel w3-leftbar w3-light-gray w3-card-4 w3-padding">

<h3>User</h3>
{% for user in owner.user_set.all %}
    <li><b>
        <a href="{% url 'admin:organization_user_change' user.id %}">{{user}}</a></b> {{user.first_name}} {{user.last_name}}
        ({% for grp in user.groups.all %}
            <a href="{% url 'admin:organization_group_change' grp.id %}">{{grp}}</a>,
        {% endfor %})
        with access to scopes:
        ({% for scope in user.scopes.all %}
            <a href="{% url 'admin:organization_scope_change' scope.id %}">{{scope}}</a>,  
        {% endfor %})
        / <a href="{% url 'user' user.id %}">DETAILS</a> 
    </li>
{% endfor user %}
</div>

{% endblock %}
