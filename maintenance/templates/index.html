{% extends 'base.html' %}

{% block body %}

<header class="w3-container" style="padding-top:22px">
    <h2>Overview for {{request.user.first_name}} {{request.user.last_name}} ({{request.user.username}})</b></h2>
</header>

<div class="w3-row-padding w3-margin-bottom">
    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Roles:</h4>
            {% if user.is_superuser %}
            <li>Superuser (Maintenance of all Hub-Elements)</li>
            {% else %}
                {% if user.is_staff %}
                <li>Staff (Maintenance of {{request.user.owner}} Hub-Elements)</li>
                {% endif %}
            {% endif %}
            {% for group in user.groups.all %}
            <li>{{group}}</li>
            {% endfor %}
        </div>
    </div>

    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Scopes:</h4>
            {% for scope in all_scopes.all %}
            <li>{{scope}} - {{scope.desc}}</li>
            {% endfor %}
        </div>
    </div>

    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Last 5 Activities:</h4>
            {% for logentry in LogEntrys %}
            <li>{{logentry}}</li>
            {% endfor %}
        </div>
    </div>
</div>


{% if user.is_staff %}
<header class="w3-container" style="padding-top:22px">
    <h2>Overview for {{request.user.owner}} - {{request.user.owner.desc}}  Number of User:  {{request.user.owner.user_set.all|length}}</b></h2>
</header>

<div class="w3-row-padding w3-margin-bottom">
    {% for application in applications %}
    <div class="w3-third">
        <div class="w3-container w3-theme w3-padding-16">
            <!--div class="w3-left"><i class="fa fa-warehouse w3-xxxlarge"></i></div-->
            <div class="w3-clear"></div>
            <h4>Application: {{application}} - {{application.desc}}</h4>
            <br>Business-Units:
            {% if application.business_unit_1 %}
            <li>{{application.business_unit_1}}</li>
            {% endif %}
            {% if application.business_unit_2 %}
            <li>{{application.business_unit_2}}</li>
            {% endif %}
            {% if application.business_unit_3 %}
            <li>{{application.business_unit_3}}</li>
            {% endif %}
            {% if application.business_unit_4 %}
            <li>{{application.business_unit_3}}</li>
            {% endif %}
            {% if application.business_unit_5 %}
            <li>{{application.business_unit_5}}</li>
            {% endif %}
            <br>Scopes: {{application.scope_set.all|length}}<br>

            {% for area in application.area_set.all %}
            <br>Area: {{area}} - {{area.desc}}
            <li>Database: <a href="{% url 'admin:organization_container_change' area.database.id %}">{{area.database}}</a> ({{area.database.desc}})</li>
            <li>Schema Views: {{area.application.key.lower}}_{{area.key.lower}}</li>
            <li>Schema Tables: {{area.application.key.lower}}_{{area.key.lower}}_base</li>
            <li>Filestorage: <a href="{% url 'admin:organization_container_change' area.filestorage.id %}">{{area.filestorage}}</a> ({{area.filestorage.desc}})</li>

            {% endfor area %}

        </div>
    </div>
    {% endfor %}
</div>

{% endif %}


{% endblock %}