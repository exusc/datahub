{% extends 'base.html' %}

{% block body %}

{% if user.is_authenticated %}

<div class="w3-panel w3-leftbar w3-light-green w3-card-4 w3-padding">
    <h2>User {{user.first_name}} {{user.last_name}} ({{user.username}})
        - <a href="{% url 'admin:organization_owner_change' user.owner.id %}">{{user.owner}} / {{user.owner.desc}}</a>
        {% if user.is_superuser %}
        (Superuser)
        {% else %}
        {% if user.is_staff %}
        (Staff)
        {% endif %}
        {% endif %}

    </h2>
</div>

<div class="w3-panel w3-leftbar w3-light-gray w3-card-4 w3-padding">
    <h3>Assigned roles:</h3>
    {% for group in user.groups.all %}
    |<a href="{% url 'admin:organization_group_change' group.id %}" class="w3-btn">{{group}}</a>
    {% endfor %}|
</div>

<div class="w3-panel w3-leftbar w3-light-gray w3-card-4">
    <h3>Assigned scopes:</h3>
    {% for scope in all_scopes.all %}
    |<a href="{% url 'admin:organization_scope_change' scope.id %}" class="w3-btn" >{{scope}}</a>
    {% endfor %}|
</div>

<div class="w3-panel w3-leftbar w3-light-gray w3-card-4 w3-padding">
    {% if user.is_staff %}
    {% if user.is_superuser %}
        <h3>You are superuser - so you can change restrictions for all DATA-Hub elements</h3>
    {% else %}
        <h3>You have access to self-services for {{user.owner}}:</h3>
    {% endif %}
    |<a href="/admin" class="w3-btn">Maintenance of DATA-Hub</a>
    |<a href="{% url 'admin:organization_scope_changelist' %}" class="w3-btn" >Maintain scopes</a>  
    |<a href="{% url 'admin:organization_user_changelist' %}" class="w3-btn" >Maintain user</a>
    |<a href="{% url 'admin:organization_user_change' user.id %}" class="w3-btn" >Maintain your configuration (language, standard scope)</a>
    |<a href="{% url 'owner' user.owner.key %}" class="w3-btn">See the structure of the DATA-Hub elements for {{user.owner}} </a> 
    |{% endif %}
</div>

<div class="w3-panel w3-leftbar w3-light-gray w3-card-4 w3-padding">
    <h3>Last 5 activities:</h3>
    {% for logentry in LogEntrys %}
    <li>{{logentry}}</li>
    {% endfor %}
</div>


{% if user.is_superuser %}
<h3>Discussion on 26.06.2024:</h3>
    <h4>ToDo</h4>
    <ul>
        <li>Maintenance of areas and their data container - Combination of application and area must be unique -> results in schema name. <a href="{% url 'admin:organization_area_changelist' %}">See areas</a></li>
        <li>Owner concept for self-service. Solved by Hub Security.</li>
    </ul>
    <h4>Postponed</h4>
        <ul>
        <li>Central scopes and teams should be  defined flexible - they are just other scopes</li>
        <li>Business unit definition and scopes are on application-Level -> If we want to restrict Users to specific areas, e have to set up new applications</li>
    </ul>
    <h3>My TODO</h3>
    <ul>
        <li>Scopes anlage: üben und als Übersicht anbieten: Schnellerfassung pagination nach neu angelegt und von mir, wer darf alles dran</li>
        <li>Upload File: https://docs.djangoproject.com/en/5.0/ref/forms/api/#binding-uploaded-files-to-a-form</li>
    </ul>

{% endif %}
{% else %}
Schade eigentlich

{% endif %}


{% endblock %}